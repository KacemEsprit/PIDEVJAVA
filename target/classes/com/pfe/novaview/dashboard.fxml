<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<BorderPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.pfe.nova.Controller.DashboardController"
            prefWidth="800.0" prefHeight="600.0">

    <top>
        <HBox alignment="CENTER_RIGHT" spacing="10.0" style="-fx-padding: 10; -fx-background-color: #3498db;">
            <children>
                <Label fx:id="welcomeLabel" style="-fx-text-fill: white; -fx-font-size: 16px;"/>
                <Button text="Logout" fx:id="logoutButton" onAction="#handleLogout"
                        style="-fx-background-color: #e74c3c;"/>
            </children>
        </HBox>
    </top>

    <center>
        <TabPane fx:id="contentTabPane">
            <tabs>

                <!-- Profile Tab -->
                <Tab text="Profile" closable="false">
                    <VBox fx:id="profileContent" spacing="10.0" style="-fx-padding: 20;">
                        <children>
                            <Label fx:id="nameLabel" style="-fx-font-size: 14px;"/>
                            <Label fx:id="emailLabel" style="-fx-font-size: 14px;"/>
                            <Label fx:id="phoneLabel" style="-fx-font-size: 14px;"/>
                            <Label fx:id="addressLabel" style="-fx-font-size: 14px;"/>
                            <VBox fx:id="roleSpecificContent" spacing="10.0"/>
                            <Label fx:id="sessionTestLabel" style="-fx-font-size: 14px; -fx-text-fill: green;"/>
                            
                            <!-- New Post List Button for Patients -->
                            <Button text="Community Posts" fx:id="communityPostsButton" onAction="#navigateToPostList"
                                    style="-fx-background-color: #9b59b6; -fx-text-fill: white;"
                                    visible="false"/>
                                    
                            <Button text="Create Rapport" fx:id="createRapportButton" onAction="#handleCreateRapport"
                                    style="-fx-background-color: #2ecc71; -fx-text-fill: white;"/>
                            <Button text="View Rapports" fx:id="viewRapportsButton" onAction="#handleViewRapports"
                                    style="-fx-background-color: #3498db; -fx-text-fill: white;"/>
                        </children>
                    </VBox>
                </Tab>

                <!-- Patients Tab -->
                <Tab text="Patients List" fx:id="patientsTab" disable="false">
                    <VBox spacing="10.0" style="-fx-padding: 20;">
                        <children>
                            <TableView fx:id="patientsTable" VBox.vgrow="ALWAYS">
                                <columns>
                                    <TableColumn fx:id="patientNameColumn" text="Name"/>
                                    <TableColumn fx:id="patientEmailColumn" text="Email"/>
                                    <TableColumn fx:id="patientAgeColumn" text="Age"/>
                                    <TableColumn fx:id="patientGenderColumn" text="Gender"/>
                                    <TableColumn fx:id="patientBloodTypeColumn" text="Blood Type"/>
                                </columns>
                            </TableView>
                        </children>
                    </VBox>
                </Tab>
                <!-- Community Posts Tab -->
                <Tab text="Community Posts" fx:id="communityPostsTab" disable="false" onSelectionChanged="#handleCommunityPostsTab">
                    <VBox spacing="10.0" style="-fx-padding: 20;">
                        <children>
                            <Label text="Community Posts" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>
                            <Label text="Connect with other patients and share your experiences."
                                   style="-fx-font-size: 14px; -fx-text-fill: #636e72;"/>
                            <Button text="View All Posts" onAction="#navigateToPostList"
                                    style="-fx-background-color: #9b59b6; -fx-text-fill: white;"/>
                        </children>
                    </VBox>
                </Tab>
                <!-- Find Doctors -->
                <Tab text="Find Doctors" fx:id="findDoctorsTab" disable="true">
                    <VBox spacing="10.0" style="-fx-padding: 20;">
                        <children>
                            <TableView fx:id="doctorsTable" VBox.vgrow="ALWAYS">
                                <columns>
                                    <TableColumn fx:id="doctorNameColumn" text="Name"/>
                                    <TableColumn fx:id="specialityColumn" text="Speciality"/>
                                    <TableColumn fx:id="experienceColumn" text="Experience"/>
                                    <TableColumn fx:id="contactColumn" text="Contact"/>
                                </columns>
                            </TableView>
                        </children>
                    </VBox>
                </Tab>

                <!-- Appointments -->
                <Tab text="Appointments" fx:id="appointmentsTab" disable="true">
                    <VBox spacing="10.0" style="-fx-padding: 20;">
                        <children>
                            <HBox spacing="10.0" alignment="CENTER_LEFT">
                                <children>
                                    <Button text="New Appointment" fx:id="newAppointmentButton"
                                            style="-fx-background-color: #2ecc71;"/>
                                </children>
                            </HBox>
                            <TableView fx:id="appointmentsTable" VBox.vgrow="ALWAYS">
                                <columns>
                                    <TableColumn fx:id="appointmentDateColumn" text="Date"/>
                                    <TableColumn fx:id="appointmentTimeColumn" text="Time"/>
                                    <TableColumn fx:id="appointmentWithColumn" text="With"/>
                                    <TableColumn fx:id="appointmentStatusColumn" text="Status"/>
                                </columns>
                            </TableView>
                        </children>
                    </VBox>
                </Tab>

                <!-- Donations -->
                <Tab text="My Donations" fx:id="donationsTab" disable="true">
                    <VBox spacing="10.0" style="-fx-padding: 20;">
                        <children>
                            <HBox spacing="10.0" alignment="CENTER_LEFT">
                                <children>
                                    <Button text="New Donation" fx:id="newDonationButton"
                                            style="-fx-background-color: #2ecc71;"/>
                                </children>
                            </HBox>
                            <TableView fx:id="donationsTable" VBox.vgrow="ALWAYS">
                                <columns>
                                    <TableColumn fx:id="donationDateColumn" text="Date"/>
                                    <TableColumn fx:id="donationTypeColumn" text="Type"/>
                                    <TableColumn fx:id="donationAmountColumn" text="Amount"/>
                                    <TableColumn fx:id="donationStatusColumn" text="Status"/>
                                </columns>
                            </TableView>
                        </children>
                    </VBox>
                </Tab>

                <!-- Rapports -->
                <Tab text="Create Rapport" fx:id="createRapportTab" disable="true">
                    <fx:include source="CreateRapport.fxml"/>
                </Tab>

                <Tab text="View Rapports" fx:id="viewRapportTab" disable="true">
                    <fx:include source="ViewRapports.fxml"/>
                </Tab>

                <!-- Admin -->
                <Tab text="Administration" fx:id="adminTab" disable="true">
                    <VBox spacing="10.0" style="-fx-padding: 20;">
                        <children>
                            <TableView fx:id="usersTable" VBox.vgrow="ALWAYS">
                                <columns>
                                    <TableColumn fx:id="userNameColumn" text="Name"/>
                                    <TableColumn fx:id="userEmailColumn" text="Email"/>
                                    <TableColumn fx:id="userRoleColumn" text="Role"/>
                                    <TableColumn fx:id="userStatusColumn" text="Status"/>
                                </columns>
                            </TableView>
                        </children>
                    </VBox>
                </Tab>

            </tabs>
        </TabPane>
    </center>
</BorderPane>

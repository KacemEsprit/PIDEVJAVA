<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import java.net.URL?>
<?import javafx.scene.web.WebView?>

<VBox xmlns="http://javafx.com/javafx/17"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.pfe.nova.Controller.SignupController"
      alignment="CENTER"
      spacing="20"
      styleClass="signup-container">

    <stylesheets>
        <URL value="@styles/admin-styles.css" />
    </stylesheets>

    <ScrollPane fitToWidth="true" fitToHeight="false" styleClass="signup-scroll">
        <VBox styleClass="signup-card" spacing="15">
            <Label text="Create Account" styleClass="signup-title"/>
            <Label text="Fill in your information" styleClass="signup-subtitle"/>

            <!-- Role -->
            <VBox spacing="5">
                <Label text="Role" styleClass="input-label"/>
                <ComboBox fx:id="roleComboBox"
                          promptText="Select Role"
                          styleClass="signup-field"
                          prefWidth="300"
                          prefHeight="40"/>
            </VBox>

            <!-- Nom -->
            <VBox spacing="5">
                <Label text="Nom" styleClass="input-label"/>
                <TextField fx:id="nomField"
                           promptText="Nom"
                           styleClass="signup-field"
                           prefWidth="300"
                           prefHeight="40"/>
            </VBox>

            <!-- Prenom -->
            <VBox spacing="5">
                <Label text="Prenom" styleClass="input-label"/>
                <TextField fx:id="prenomField"
                           promptText="Prenom"
                           styleClass="signup-field"
                           prefWidth="300"
                           prefHeight="40"/>
            </VBox>

            <!-- Email -->
            <VBox spacing="5">
                <Label text="Email" styleClass="input-label"/>
                <TextField fx:id="emailField"
                           promptText="Email"
                           styleClass="signup-field"
                           prefWidth="300"
                           prefHeight="40"/>
            </VBox>

            <!-- Telephone -->
            <VBox spacing="5">
                <Label text="Telephone" styleClass="input-label"/>
                <TextField fx:id="telField"
                           promptText="Telephone"
                           styleClass="signup-field"
                           prefWidth="300"
                           prefHeight="40"/>
            </VBox>

            <!-- Adresse -->
            <VBox spacing="5">
                <Label text="Adresse" styleClass="input-label"/>
                <TextField fx:id="adresseField"
                           promptText="Adresse"
                           styleClass="signup-field"
                           prefWidth="300"
                           prefHeight="40"/>
            </VBox>

            <!-- Password -->
            <VBox spacing="5">
                <Label text="Password" styleClass="input-label"/>
                <PasswordField fx:id="passwordField"
                               promptText="Password"
                               styleClass="signup-field"
                               prefWidth="300"
                               prefHeight="40"/>
            </VBox>

            <!-- Confirm Password -->
            <VBox spacing="5">
                <Label text="Confirm Password" styleClass="input-label"/>
                <PasswordField fx:id="confirmPasswordField"
                               promptText="Confirm Password"
                               styleClass="signup-field"
                               prefWidth="300"
                               prefHeight="40"/>
            </VBox>

            <VBox fx:id="dynamicFieldsContainer" spacing="10"/>

            <!-- WebView for reCAPTCHA -->
            <WebView fx:id="recaptchaWebView"
                     prefWidth="800"
                     prefHeight="600"/>

            <!-- Label to show reCAPTCHA status -->
            <Label fx:id="recaptchaStatusLabel"
                   text="Please complete the reCAPTCHA"
                   styleClass="recaptcha-status"/>

            <Button text="Sign Up"
                    fx:id="signupButton"
                    onAction="#handleSignup"
                    styleClass="signup-button"
                    prefWidth="300"
                    prefHeight="40"/>

            <HBox alignment="CENTER" spacing="10">
                <Label text="Or" styleClass="divider-text"/>
            </HBox>

            <Button text="Sign up with Google"
                    fx:id="googleSignupButton"
                    onAction="#handleGoogleSignup"
                    styleClass="google-signup-button"
                    prefWidth="300"
                    prefHeight="40"/>

            <Label fx:id="errorLabel"
                   styleClass="error-label"
                   visible="false"/>

            <HBox alignment="CENTER" spacing="5">
                <Label text="Already have an account?" styleClass="text-muted"/>
                <Hyperlink text="Sign in" onAction="#navigateToLogin" styleClass="login-link"/>
            </HBox>
        </VBox>
    </ScrollPane>
</VBox>
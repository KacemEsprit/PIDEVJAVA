<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.text.Text?>
<?import javafx.scene.image.ImageView?>

<BorderPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.pfe.nova.Controller.AdminDashboardController"
            stylesheets="@styles/admin-styles.css">
    <!-- Left Sidebar Navigation -->
    <left>
        <VBox styleClass="sidebar">
            <!-- Profile Section -->
            <VBox alignment="CENTER" spacing="10" style="-fx-padding: 10 0 20 0;">
                <ImageView fx:id="sidebarProfileImage" fitHeight="64" fitWidth="64" style="-fx-background-radius: 32;"/>
                <Label fx:id="sidebarProfileName" styleClass="logo-text" style="-fx-font-size: 16;"/>
                <Label fx:id="sidebarProfileEmail" style="-fx-text-fill: #bdc3c7; -fx-font-size: 12;"/>
            </VBox>

            <VBox spacing="10" styleClass="nav-buttons">
                <Button fx:id="dashboardBtn" styleClass="nav-button" onAction="#showDashboard">
                    <graphic><Label text="ðŸ " styleClass="icon-label"/></graphic>
                    <text>Dashboard</text>
                </Button>
                <Button fx:id="usersBtn" styleClass="nav-button" onAction="#showUsersManagement">
                    <graphic><Label text="ðŸ‘¥" styleClass="icon-label"/></graphic>
                    <text>Users</text>
                </Button>
                <Button fx:id="pendingPostsBtn" styleClass="nav-button" onAction="#showPendingPosts">
                    <graphic><Label text="ðŸ•’" styleClass="icon-label"/></graphic>
                    <text>Pending Posts</text>
                </Button>
                <Button fx:id="reportedCommentsBtn" styleClass="nav-button" onAction="#showReportedComments">
                    <graphic><Label text="ðŸš©" styleClass="icon-label"/></graphic>
                    <text>Reported Comments</text>
                </Button>
                <Button fx:id="statsBtn" styleClass="nav-button" onAction="#showStatistics">
                    <graphic><Label text="ðŸ“Š" styleClass="icon-label"/></graphic>
                    <text>Statistics</text>
                </Button>

                <Button fx:id="settingsBtn" styleClass="nav-button" onAction="#showProfile">
                    <graphic>
                        <Label text="ðŸ‘¤" styleClass="icon-label"/>
                    </graphic>
                    <text>Profile</text>
                </Button>
                <Button fx:id="pharmacieBtn" styleClass="nav-button" onAction="#togglePharmacieMenu">
                    <graphic><Label text="ðŸ’Š" styleClass="icon-label"/></graphic>
                    <text>Pharmacie</text>
                </Button>


                <!-- Sous-menu Pharmacie -->
                <VBox fx:id="pharmacieSubMenu" visible="false" managed="false" spacing="5">
                    <Button text="Gestion MÃ©dicaments" onAction="#showMedicationManagement"
                            style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-pref-width: 140; -fx-translate-x: 20;"/>
                    <Button text="Confirmation Commandes" onAction="#showOrderConfirmation"
                            style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-pref-width: 140; -fx-translate-x: 20;"/>
                    <Button text="Avis" onAction="#showReviewsStatistics"
                            style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-pref-width: 140; -fx-translate-x: 20;"/>
                    <Button text="ToDo List" onAction="#showToDoList"
                            style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-pref-width: 140; -fx-translate-x: 20;"/>

                </VBox>
                <Button styleClass="nav-button" onAction="#showReports">
                    <graphic>
                        <Label text="ðŸ“„" styleClass="icon-label"/> <!-- Updated icon for Reports -->
                    </graphic>
                    <text>Reports</text>
                </Button>

                <Button styleClass="nav-button" onAction="#showSessions">
                    <graphic>
                        <Label text="ðŸ—“ï¸" styleClass="icon-label"/> <!-- Updated icon for Sessions -->
                    </graphic>
                    <text>Sessions</text>
                </Button>



                <Region VBox.vgrow="ALWAYS"/>
                <Button fx:id="logoutButton" styleClass="nav-button, logout-button" onAction="#handleLogout">
                    <graphic><Label text="ðŸšª" styleClass="icon-label"/></graphic>
                    <text>Logout</text>
                </Button>
            </VBox>
        </VBox>
    </left>

    <!-- Main Content Area -->
    <center>
        <StackPane fx:id="contentArea">

        <VBox>
            <!-- Top Header -->
            <HBox styleClass="header">
                <Label fx:id="welcomeLabel" styleClass="welcome-text"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label fx:id="sessionTestLabel" styleClass="session-label"/>
            </HBox>
            <!-- Main Content Tabs -->
            <TabPane fx:id="mainTabPane" styleClass="main-content">
                <Tab text="Users Management" closable="false">
                    <VBox spacing="10" style="-fx-padding: 20;">
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <TextField fx:id="searchField" promptText="Search users..."/>
                            <ComboBox fx:id="filterRole" promptText="All Roles"/>
                        </HBox>
                        <GridPane fx:id="usersGrid" hgap="20" vgap="20" styleClass="users-grid"/>
                    </VBox>
                </Tab>
            </TabPane>
        </VBox>
        </StackPane>
    </center>
</BorderPane>